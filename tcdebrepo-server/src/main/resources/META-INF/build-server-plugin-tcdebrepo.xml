<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd"
       default-autowire="constructor">
       
       <bean id="debDownloadController"
     	class="debrepo.teamcity.web.DebDownloadController" 
     	/>

       <bean id="debRepoProjectSettingsTab"
     	class="debrepo.teamcity.web.DebRepoProjectSettingsTab" 
     	/>

       <bean id="debRepoConfigurationActionController"
     	class="debrepo.teamcity.web.DebRepoConfigurationActionController" 
     	/>
     	
       <bean id="debRepositoryManager"
     	class="debrepo.teamcity.service.DebRepositoryManagerImpl"
     	/>
     	
       <bean id="pluginDataResolver"
     	class="debrepo.teamcity.entity.helper.PluginDataResolverImpl"
     	/>
     	
       <bean id="jaxDatabaseHelper"
     		class="debrepo.teamcity.entity.helper.DebRepositoryDatabaseJaxHelperImpl">

       </bean>
     	
       <bean id="xmlDatabasePersister"
     		class="debrepo.teamcity.entity.helper.DebRepositoryDatabaseXmlPersisterImpl">
     	     <constructor-arg ref="pluginDataResolver">
    		</constructor-arg>
     	     <constructor-arg ref="jaxDatabaseHelper">
    		</constructor-arg>
     	</bean>

       <bean id="jaxConfigHelper"
     		class="debrepo.teamcity.entity.helper.DebRepositoryConfigurationJaxHelperImpl">
       </bean>

       <bean id="debRepositoryConfigFileChangeHandler"
     		class="debrepo.teamcity.settings.DebRepositoryConfigFileChangeHandler" 
     		init-method="register" >
     	     <constructor-arg ref="debRepositoryManager">
    		</constructor-arg>     		
     	     <constructor-arg ref="jaxConfigHelper">
    		</constructor-arg>     		
       </bean>
       
       <bean id="debRepositoryDatabase"
     		class="debrepo.teamcity.service.MapBackedDebRepositoryDatabase">
     	     <constructor-arg ref="debRepositoryManager">
    		</constructor-arg>     		
       </bean>
       
       <bean id="debRepositoryBuildArtifactsPublisher"
     		class="debrepo.teamcity.service.DebRepositoryBuildArtifactsPublisherImpl">
     	     <constructor-arg ref="debRepositoryManager">
    		</constructor-arg>     		
       </bean>
       
       <bean id="debRepoServerEventListener"
     		class="debrepo.teamcity.service.DebRepoServerEventListener"
     		init-method="register" >
     	     <constructor-arg ref="debRepositoryBuildArtifactsPublisher">
    		</constructor-arg>     		
       </bean>
    
       <bean id="debFileReaderFactory"
     		class="debrepo.teamcity.archive.DebFileReaderFactory">
       </bean>
    
       <bean id="debRepositoryConfigurationFactory"
     		class="debrepo.teamcity.service.DebRepositoryConfigurationFactoryImpl">
       </bean>
       
</beans>