<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<migration xmlns="http://ebean-orm.github.io/xml/ns/dbmigration">
    <changeSet type="apply">
        <createTable name="o_deb_metadata_file" identityType="identity" pkName="pk_o_deb_metadata_file">
            <column name="id" type="bigint" primaryKey="true"/>
            <column name="repository_id" type="bigint" references="o_repository.id" foreignKeyName="fk_o_deb_metadata_file_repository_id" foreignKeyIndex="ix_o_deb_metadata_file_repository_id"/>
            <column name="file_name" type="varchar"/>
            <column name="file_content" type="blob"/>
            <column name="dist" type="varchar"/>
            <column name="component" type="varchar"/>
            <column name="arch" type="varchar"/>
            <column name="path" type="varchar"/>
            <column name="md5" type="varchar"/>
            <column name="sha1" type="varchar"/>
            <column name="sha256" type="varchar"/>
            <column name="modified_time" type="timestamp" notnull="true"/>
        </createTable>
        <createIndex indexName="ix_o_deb_metadata_file_repository_id_dist_path_modified_t_1" tableName="o_deb_metadata_file" columns="repository_id,dist,path,modified_time"/>
        <createIndex indexName="ix_o_deb_metadata_file_file_name" tableName="o_deb_metadata_file" columns="file_name"/>
        <createIndex indexName="ix_o_deb_metadata_file_dist" tableName="o_deb_metadata_file" columns="dist"/>
        <createIndex indexName="ix_o_deb_metadata_file_path" tableName="o_deb_metadata_file" columns="path"/>
        <createIndex indexName="ix_o_deb_metadata_file_modified_time" tableName="o_deb_metadata_file" columns="modified_time"/>
        <dropIndex indexName="ix_o_deb_packages_file_repository_id_dist_path_modified_t_1" tableName="o_deb_packages_file"/>
        <dropIndex indexName="ix_o_deb_packages_file_dist" tableName="o_deb_packages_file"/>
        <dropIndex indexName="ix_o_deb_packages_file_path" tableName="o_deb_packages_file"/>
        <dropIndex indexName="ix_o_deb_packages_file_modified_time" tableName="o_deb_packages_file"/>
    </changeSet>
    <changeSet type="pendingDrops">
        <dropTable name="o_deb_packages_file" sequenceCol="id"/>
        <dropTable name="o_deb_release_file" sequenceCol="id"/>
        <dropTable name="o_deb_release_file_simple" sequenceCol="id"/>
    </changeSet>
</migration>